#!/bin/bash
# This script starts the backend server.
# It MUST be run from the 'server' directory.

# --- VITAL: Source your ROS2 environment ---
# This ensures that Python scripts spawned by the server can find ROS2 libraries like rclpy.
# Update this path if your ROS2 installation is different.
if [ -f /opt/ros/rolling/setup.bash ]; then
  echo "--- Sourcing ROS2 environment from /opt/ros/rolling/setup.bash ---"
  source /opt/ros/rolling/setup.bash
else
  echo "--- WARNING: ROS2 setup script not found at /opt/ros/rolling/setup.bash. Gazebo integration may fail. ---"
fi

# --- Activate Python Virtual Environment ---
source venv/bin/activate

# --- Start the Node.js Backend Server ---
echo "ðŸš€ Starting Singularity Agent Factory Backend Server..."
npm start